extends layout
block content       
  .container-fulid      
    .col-sm-10.col-md-10
      .panel.panel-default
        .panel-heading
          .row
            .pull-right(style="margin-right: 10px;")
              h3#h3.panel-title اسرة الزوج
            .col-xs-6.col-md-6
              form.form#search_family(action="")
                .input-group
                  input.form-control(type='text',name="search_name" placeholder='بحث...برقم القيد فقط')
                  .input-group-btn
                    button.btn.btn-default(type="submit")
                      i.glyphicon.glyphicon-search
        .table-responsive
          table.table.table-bordred.table-striped.table-condensed
            thead
              tr.info
                th.text-center رقم الاسرة
                th.text-center رقم القيد
                th.text-center رقم ورقة العائلة
                th.text-center تاريخ فتح ورقة العائلة
                th.text-center الرقم الالي
                th.text-center حالة الاسرة
                th.text-center نوع الاسرة
                th.text-center السجل المدني
                th.text-center اضافة فرد
            tbody
            for family in familys
              tr(id="br-#{family.id}",data-registry_number="#{family.Registrynumber}", data-record_number="#{family.Recordnumber}", data-family_record_date="#{family.FamilyRecordDate.getFullYear()}/#{family.FamilyRecordDate.getMonth()+1}/#{family.FamilyRecordDate.getDate()}", data-auto_generated_id="#{family.Autogenerated_Id}", data-is_closed="#{family.Is_Closed}", data-family_type="#{family.FamilyType}",data-officee="#{family.OfficeId}",data-office_name="#{family.Office.office_name}")
                td.text-center #{family.id}
                td.text-center #{family.Registrynumber}
                td.text-center #{family.Recordnumber}
                td.text-center #{family.FamilyRecordDate.getFullYear()}/#{family.FamilyRecordDate.getMonth()+1}/#{family.FamilyRecordDate.getDate()}
                td.text-center #{family.Autogenerated_Id} 
                td.text-center 
                  if family.Is_Closed == 1
                    | نشطة
                  if family.Is_Closed == 2
                    | غير نشطة
                td.text-center 
                  if family.FamilyType==1
                    |ليبية
                  else if family.FamilyType==2
                    |مؤقته
                  else if family.FamilyType==3
                    |اجانب
                td.text-center #{family.Office.office_name}
                td.text-center
                  p(data-placement="top", data-toggle="tooltip", title="أضافة فرد")
                    button#open_family.btn.btn-primary.btn-xs.edit_btn(data-title="ADD", data-toggle="modal", data-target="#add",value="#{family.id}")
                      span.glyphicon.glyphicon-plus
                                    
  #add.modal.fade(tabindex="-1", role="dialog", aria-labelledby="edit", aria-hidden="true")
    .modal-dialog.modal-lg
      .modal-content
        form.form(action="/divorce/new_divorce", method="post", accept-charset="utf-8", role="form")
          .modal-header
            button.close(type="button", data-dismiss="modal", aria-hidden="true")
              span.glyphicon.glyphicon-remove(aria-hidden="true")
            h4.modal-title.custom_align بيانات واقعة ألطﻻق
          .modal-body
            h4.modal-title#father_name أسم الزوج :              
            hr
            ul.nav.nav-tabs(role="tablist")
              li.active(role="presentation")
                a(href="#tabOne", aria-controls="tabOne", role="tab", data-toggle="tab") بينات الزوجة
              li
                a(href="#tabTwo", aria-controls="tabTwo", role="tab", data-toggle="tab") بيانات الواقعة
            .tab-content
              #tabOne.tab-pane.active(role="tabpanel")
                .form-group            
                  .row
                    .col-xs-4.col-md-4
                      label الزوجات
                      select#waif_name.form-control.selectpicker(name="waif_name", data-live-search="true", data-size=5)
                    .col-xs-3.col-md-3
                      label تاريخ ميلاد الزوجة
                      #data 
                    .col-xs-5.col-md-5
                      label هل ترغب المطلقة في العودة إلى أسرتها السابقة ؟
                      select.form-control.selectpicker(name="wife_bt_family", data-live-search="true", data-size=5)
                        option(value="1") نعم
                        option(value="2") لا
                  br
                  .row     
                    .col-xs-4.col-md-4
                      label هل ترغب الزوجة في حضانة الاطفال ؟
                    .col-xs-2.col-md-2  
                      input#toggle-child(name = "wife_custody",type='checkbox', data-on="نعم",data-off="لا", data-toggle='toggle')
                  br
                  br
                  #child-table  
                    .table-responsive
                      table.table.table-bordred.table-striped.table-condensed
                        thead
                          tr.info
                            th.text-center أسم الطفل الرباعي
                            th.text-center تاريخ الميلاد
                            th.text-center أسم الام
                            th.text-center أختار
                        tbody#family_table    
                        
              #tabTwo.tab-pane(role="tabpanel") 
                br
                .row    
                  .col-xs-3.col-md-3
                    .form-group
                      label المنطقة
                      select#region.form-control.selectpicker(name="", data-live-search="true", data-size=5)
                        option(value="", style='color:grey; display:none;') اختر المنطقة...
                        for region in regions
                          option(value="#{region.id}") #{region.region_name}
                  .col-xs-3.col-md-3
                    .form-group
                      label مكتب الاصدار
                      select#Branches.form-control.selectpicker(name="", data-live-search="true", data-size=5)
                        option(value="", style='colr:grey; display:none;') مكتب الاصدار
                  .col-xs-3.col-md-3
                    .form-group
                      label السجل المدني
                      select#Offices.form-control.selectpicker(name="officeId", data-live-search="true", data-size=5)
                        option(value="", style='colr:grey; display:none;') السجل المدني
                  .col-xs-3.col-md-3
                    .form-group
                      label مكان الطﻻق
                      input.form-control(type="text", name="divorce_place", placeholder="عقد الطﻻق")      
                .row
                  .col-xs-3.col-md-3
                    .form-group
                      label تاريخ الطﻻق
                      input#divorce_date.form-control(type="text", name="divorce_date", placeholder="تاريخ الطﻻق")
                  .col-xs-3.col-md-3
                    .form-group
                      label رقم عقد الطﻻق
                      input.form-control#contract_divorce_number(type="text", name="contract_divorce_number", placeholder="رقم عقد الطﻻق")
                  .col-xs-3.col-md-3
                    .form-group
                      label رقم سجل الطﻻق
                      input.form-control#record_divorce_number(type="text", name="record_divorce_number", placeholder="رقم سجل الطﻻق")
                  .col-xs-3.col-md-3
                    .form-group
                      label تاريخ تسجيل الطﻻق
                      input#inform_date.form-control(type="text", name="inform_date", placeholder="تاريخ اﻹكتيتاب")   
                .row
                  .col-xs-3.col-md-3
                    .form-group
                      label بلد الطﻻق
                      select#country.form-control.selectpicker(name="", data-live-search="true", data-size=5)
                        option(value="", style='colr:grey; display:none;') بلد الميلاد
                        for country in countrys
                          option(value="#{country.id}") #{country.country_name}
                  .col-xs-3.col-md-3
                    .form-group
                      label مدينة الطﻻق
                      select#Cities.form-control.selectpicker(name="city_Id", data-live-search="true", data-size=5)
                        option(value="", style='colr:grey; display:none;') مدينة الميلاد   
                  .col-xs-3.col-md-3
                    .form-group
                      label حالة الطﻻق 
                      select#divorce_type.form-control.selectpicker(name="divorce_type", data-live-search="true", data-size=5)
                        option(value="", style='colr:grey; display:none;') مدينة الميلاد    
                        option(value="1") طﻻق محكمة
                        option(value="2") طﻻق مؤذون                   
          .modal-footer
            button.btn.btn-success.btn-lg(type="submit", style="width: 100%;")
              span.glyphicon.glyphicon
              |  حفظ
  #edit.modal.fade(tabindex="-1", role="dialog", aria-labelledby="edit", aria-hidden="true")
    .modal-dialog
      .modal-content
        form.form#edit_family_form(action="/family/edit_family", method="post", accept-charset="utf-8", role="form")
          .modal-header
            button.close(type="button", data-dismiss="modal", aria-hidden="true")
              span.glyphicon.glyphicon-remove(aria-hidden="true")
            h4.modal-title.custom_align تعديل بيانات الأسرة
          .modal-body
            .row
          .modal-footer
            button#edit_family_btn.btn.btn-info.btn-lg(type="submit", style="width: 100%;")
              span.glyphicon.glyphicon-ok-sign
              |  تعديل
  #delete.modal.fade(tabindex="-1", role="dialog", aria-labelledby="edit", aria-hidden="true")
    .modal-dialog
      .modal-content
        form.form#delete_family_form(action="/family/delete_family", method="post", accept-charset="utf-8", role="form")
          .modal-header
            button.close(type="button", data-dismiss="modal", aria-hidden="true")
              span.glyphicon.glyphicon-remove(aria-hidden="true")
            h4.modal-title.custom_align إلغاء أسرة معين
          .modal-body
            .alert.alert-danger.h5
              //- get hidden ID has family_id_delete
              input#family_id_delete.form-control(type="hidden", name="id")               
              span.glyphicon.glyphicon-warning-sign
              |  هل تريد فعلا الغاء هذه الأسرة ؟
          .modal-footer
            button#yesBtn.btn.btn-success(type="submit")
              span.glyphicon.glyphicon-ok-sign
              |  نعم
            button.btn.btn-default(type="button", data-dismiss="modal")
              span.glyphicon.glyphicon-remove
              |  لا
  script(src='/js/jquery-2.1.1.min.js')
  script(src='/js/bootstrap.min.js')
  script(src='/js/bootstrap-select.min.js')
  script(src='/js/jquery.validate.min.js')
  script(src='/js/bootstrap-notify.min.js')
  script(src='/js/moment-with-locales.min.js')
  script(src='/js/bootstrap-datetimepicker.min.js')
  script(src='/js/bootstrap-switch.min.js')
  script(src='/js/bootstrap-toggle.min.js') 
  script(src='/js/jquery.mask.min.js')
  script(src='/js/divorce.js')  
  script(src='/js/helpers.js')

    
